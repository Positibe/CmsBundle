{% extends '@PositibeCms/layout.html.twig' %}

{% from '@PositibeCore/_macros.html.twig' import pagination %}
{% import '@PositibeCore/_buttons.html.twig' as buttons %}

{% block title %}Bloques simples{% endblock %}
{% block subtitle %}Listado de bloques simple{% endblock %}
{% set menu_active = 'block' %}
{% set content_menu = 'image' %}

{% block breadcrumb_list %}
    <li class="breadcrumb-item">

        <a href="{{ path('positibe_cms_block_index') }}">Bloques simples</a>
    </li>
{% endblock %}

{% block content %}
    <div class="portlet light">
        <div class="portlet-title">
            <div class="caption">
                <p class="caption-subject font-green-sharp bold uppercase"><i class="fa fa-image"></i> Bloques simples</p>
            </div>
            <div class="actions">
                <a href="{{ path('positibe_cms_block_create') }}" class="btn btn-sm btn-default"><i class="fa
        fa-plus"></i> Nuevo bloque simple</a>
            </div>
        </div>
        <div class="portlet-body">
            {{ pagination(content_blocks) }}
            <table class="table table-striped table-bordered table-hover">
                <tr>
                    <th>No.</th>
                    <th class="col-lg-1">{{ sylius_resource_sort('name', 'Nombre') }}</th>
                    <th class="col-lg-2">{{ sylius_resource_sort('title', 'Título') }}</th>
                    <th class="col-lg-3">Cuerpo</th>
                    <th class="col-lg-1">Imagen</th>
                    <th>Acciones</th>
                </tr>
                {% set count = content_blocks.maxPerPage * (content_blocks.currentPage - 1) %}
                {% for content_block in content_blocks %}
                    <tr>
                        <td>{{ count + loop.index }}</td>
                        <td><a href="{{ path('positibe_cms_block_update',
                            {'name': content_block.name}) }}"
                               title="{{ content_block.name }}">{{ content_block.name | truncate(30) }}</a></td>
                        <td>{{ content_block.title }}</td>
                        <td>{{ content_block.body | striptags | truncate(56) }}</td>
                        <td>
                            {% if content_block.image is not null %}
                            <img src="{{ content_block.image.path | imagine_filter('image_thumbnail_small') }}" title="{{ content_block.image.metadata['filename'] }}">
                            {% else %}
                            <p class="label label-warning">No posee imágen</p>
                            {% endif %}
                        </td>
                        <td>
                            <a class="btn btn-default btn-xs"
                               href="{{ path('positibe_cms_block_show', {'name': content_block.name}) }}"><i
                                        class="fa fa-search"></i> Detalles</a>
                            <a class="btn btn-default btn-xs"
                               href="{{ path('positibe_cms_block_update', {'name': content_block.name}) }}"><i
                                        class="fa fa-edit"></i> Editar</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="6">No hay bloques</td>
                    </tr>
                {% endfor %}
            </table>
            {{ pagination(content_blocks) }}
        </div>
    </div>
{% endblock %}
